<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
    crossorigin="anonymous"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css"
    integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <link rel="stylesheet" href="css/utils.css">

  <link rel="stylesheet" href="./css/navbar.css">
  <link rel="stylesheet" href="./css/card.css">
  <link rel="stylesheet" href="./css/utils.css">
  <link rel="stylesheet" href="./css/slider.css">
  <title>Document</title>
  <style>
  </style>
</head>



<body>
 <nav class="navbar navbar-expand-lg">
    <div class="container-fluid">

      <a href="#">
        <span class="navbar-brand text-light"><i class="fa-solid fa-kitchen-set"></i> TASHA</span>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
        aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse justify-content-center navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav">

          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="/">Home</a>
          </li>

          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Categories
            </a>
            <ul class="dropdown-menu ">
              <li><a class="dropdown-item" href="./cookware.html">Cookware</a></li>
              <li><a class="dropdown-item" href="./refrigeration.html">Refrigeration</a></li>
              <li><a class="dropdown-item" href="./appliances.html">Appliances</a></li>
              <li><a class="dropdown-item food-storage" href="./foodStorage.html">Food Storage</a></li>
            </ul>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="./about.html">About</a>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="./contact.html">Contact</a>
          </li>


          <li class="nav-item">
            <a class="nav-link" href="./support.html">Support</a>
          </li>

        </ul>
      </div>

      <div class=" fontawesomes collapse navbar-collapse" id="navbarNavDropdown">

        <a href="/profile.html">
          <i style="color: white;" class="fa-solid fa-user"></i>
        <span role="button">Profile</span>
        </a>
        
        <a href="/Order.html">
          <i style="color: white;" class="fa-solid fa-heart"></i>
        <span role="button">Order</span>
        </a>
        
        <a href="/Cart.html">
          <i style="color: white;" class="fa-solid fa-cart-shopping"></i>
        <span role="button">Cart</span>
        </a>
      </div>


    </div>
  </nav>




  <section class="d-flex container justify-content-around my-5">

    <div class="menu-icon my-4 d-lg-none " id="sidebarMenuIcon" aria-label="Open sidebar" tabindex="0">
      <i class="fa-solid fa-ellipsis-vertical"></i>
    </div>

    <aside class="sidebar p-3 shadow-sm" id="sidebar">
      <button type="button" class="btn-close d-lg-none mb-3" aria-label="Close" id="sidebarCloseBtn"></button>
      <h5 class="mb-3">Categories</h5>
      <ul class="list-unstyled">
        <li><a href="./cookware.html" class="sidebar-link">Cookware</a></li>
        <li><a href="./refrigeration.html" class="sidebar-link">Refrigeration</a></li>
        <li><a href="./appliances.html" class="sidebar-link">Appliances</a></li>
        <li><a href="./foodstorage.html" class="sidebar-link">Food Storage</a></li>
      </ul>

      <h5 class="mt-4 mb-3">üí≤ Price Range</h5>
      <input placeholder="$" type="number">

      <h5 class="mt-4 mb-3">‚≠ê Rating</h5>
      <div>
        <input type="checkbox" class="rating"> 4‚òÖ & above <br>
        <input type="checkbox" class="rating"> 3‚òÖ & above <br>
        <input type="checkbox" class="rating"> 2‚òÖ & above
      </div>

      <h5 class="mt-4 mb-3">üè∑Ô∏è Brand</h5>
      <div>
        <input type="checkbox" onclick="checkBrand(this)" class="brand"> Samsung <br>
        <input type="checkbox" onclick="checkBrand(this)" class="brand"> LG <br>
        <input type="checkbox" onclick="checkBrand(this)" class="brand"> Haier <br>
        <input type="checkbox" onclick="checkBrand(this)" class="brand"> Whirlpool <br>

      </div>

      <h5 class="mt-4 mb-3">‚öôÔ∏è Material</h5>
      <div>
        <input type="checkbox" onclick="checkMaterial(this)" class="material"> Stainless Steel <br>
        <input type="checkbox" onclick="checkMaterial(this)" class="material"> Glass Finish <br>
        <input type="checkbox" onclick="checkMaterial(this)" class="material"> Plastic Body <br>
        <input type="checkbox" onclick="checkMaterial(this)" class="material"> Matte Black Coated Steel<br>

      </div>

      <h5 class="mt-4 mb-3">üì¶ Availability</h5>
      <div>
        <input type="checkbox" onclick="checkAvailability(this)" class="availability"> In Stock<br>
        <input type="checkbox" onclick="checkAvailability(this)" class="availability"> Low Stock <br>
        <input type="checkbox" onclick="checkAvailability(this)" class="availability"> Out of stock 


      </div>

    </aside>

    <div class="sidebar-backdrop" id="sidebarBackdrop"></div>

    <main class=" mb-5 container justify-content-center flex-wrap gap-5">

    </main>

  </section>


  <script>
    let products = [];




    async function getData() {
      let req = await fetch('./db/refrigeration.json');
      products = await req.json();
      renderProducts(products);
    }

    function renderProducts(list) {
      let main = document.querySelector('main');
      main.innerHTML = "";
      if (list.length === 0) {
        main.innerHTML = "<p class='text-center text-danger'>No products found ‚ùå</p>";
        return;
      }

      list.forEach(product => {
        let content = document.createElement('div');
        content.className = "col-lg-5 col-md-5 col-sm-6";
        content.innerHTML = `
          <div class="product-card">
            <div class="discount-badge">${product.discount}% OFF</div>
            <div class="product-img">
              <img src=${product.image} alt=${product.title}>
            </div>
            <h5 class="product-title">${product.title}</h5>
         
            <div>Price: $<span class="product-price">${product.discountPrice}</span>
              <span class="old-price">$${product.price}</span>
            </div>
            <div class="text-start">
              Rating: ${'<i class="fa-solid fa-star text-warning"></i>'.repeat(product.rating)}
            </div>
            <div class="text-start">Sold: ${product.sold}</div>
            <div class="text-start">Stock: <span class="text-primary">${product.availability}</span></div>
            <div class="mb-3"></div>
            <button class="btn btn-danger">Add to Cart</button>
            <button class="btn ${product.availability == 'Out of Stock' ? "btn-secondary btn-notallowed" : "btn-success"}">
              Buy Now
            </button>
          </div>`;
        main.appendChild(content);
      });
    }



    function applyFilters() {
      let priceInput = document.querySelector("aside input[type='number']").value;
      let ratingChecks = document.querySelectorAll("aside .rating");
      let brands = document.querySelectorAll("aside .brand");
      let materials = document.querySelectorAll('aside .material');
      let availability = document.querySelectorAll('aside .availability');

      let selectedRating = null;
      let selectedBrand = null;
      let selectedMaterial = null;
      let selectedAvailability = null;



      ratingChecks.forEach(chk => {
        if (chk.checked) {
          selectedRating = parseInt(chk.nextSibling.textContent);
        }
      });


      brands.forEach(brand => {
        if (brand.checked) {
          selectedBrand = brand.nextSibling.textContent.trim();
        }
      });

      materials.forEach(material => {
        if (material.checked) {
          selectedMaterial = material.nextSibling.textContent.trim();

        }
      })

      availability.forEach(avl => {
        if(avl.checked){
          selectedAvailability = avl.nextSibling.textContent.trim();
        }
      })

      let filtered = products.filter(p => {
        if (priceInput && p.discountPrice > Number(priceInput)) return false;
        if (selectedRating !== null && p.rating < selectedRating) return false;
        if (selectedBrand !== null && p.brand.trim().toLowerCase() !== selectedBrand.trim().toLowerCase()) return false;
        if (selectedMaterial !== null && p.material.trim().toLowerCase() !== selectedMaterial.trim().toLowerCase()) return false;
        if(selectedAvailability !== null && p.availability.trim().toLowerCase() !== selectedAvailability.trim().toLowerCase()) return false;

        return true;
      });

      renderProducts(filtered);
    }


    document.addEventListener("DOMContentLoaded", () => {
      getData();
      document.querySelector("aside input[type='number']").addEventListener("input", applyFilters);
      document.querySelectorAll("aside input[type='checkbox']").forEach(el => {
        el.addEventListener("change", applyFilters);
      });
    });




  </script>

  <script>

    const checkBrand = (brand) => {
      const brandbox = document.querySelectorAll('input.brand');
      brandbox.forEach((cb) => {
        if (cb !== brand) cb.checked = false;

      });
    }

    const checkMaterial = (material) => {
      const materialbox = document.querySelectorAll('input.material');
      materialbox.forEach(mb => {
        if (mb !== material) mb.checked = false
      })
    }

    const checkAvailability = (availability) => {
      const available = document.querySelectorAll('input.availability');

      available.forEach(avl => {
        if(avl !== availability) avl.checked = false;
      })
    }

  </script>

  <script>

    const sidebar = document.getElementById('sidebar');
    const menuIcon = document.getElementById('sidebarMenuIcon');
    const closeBtn = document.getElementById('sidebarCloseBtn');
    const backdrop = document.getElementById('sidebarBackdrop');


    let main = document.querySelector('main');

    function openSidebar() {
      sidebar.style.display = 'block'
      sidebar.style.width = '70vw'
      menuIcon.style.display = 'none';

      main.style.display = 'none'

      backdrop.style.display = 'block';
      document.body.style.overflowX = 'hidden';

    }
    function closeSidebar() {
      menuIcon.style.display = 'block';
      sidebar.style.display = 'none'
      main.style.display = 'flex'
      backdrop.style.display = 'none';
      document.body.style.overflow = '';

    }

    menuIcon.addEventListener('click', openSidebar);
    menuIcon.addEventListener('keydown', function (e) {
      if (e.key === 'Enter' || e.key === ' ') openSidebar();
    });
    closeBtn.addEventListener('click', closeSidebar);
    backdrop.addEventListener('click', closeSidebar);


  </script>
</body>

</html>